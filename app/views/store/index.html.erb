<% if notice %>
    <aside id="notice"><%= notice %></aside>
<% end %>

<div class="container">
    <% if flash[:index]%>
    <div class="notice">
        <%= flash[:index]%>
    </div>
    <% end %>
</div>

<h1>Your Pragmatic Catalog</h1>

<%= content_tag :div,
    id: "books",
    data: @products.to_json do %>

    <%= javascript_pack_tag 'hello_react' %>

<% end %>

<ul class="catalog">
    <% @products.each do |product| %>
        <li>
            <%= image_tag product.image_url_url %>
            
            <h2><%= product.title %></h2>
            <p>
                <%= sanitize(product.description) %>
            </p>
            <div class="price">
                <%= number_to_currency(product.price) %>
                <%= button_to 'Add to Cart', line_items_path(product_id: product)%>
            </div>
        </li>
    <% end %>
</ul>
